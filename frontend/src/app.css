/* ===== Design Tokens ===== */
:root {
  /* Page */
  --bg-page: #f3f5f7;
  --bg-card: #fff;
  --bg-card-header: #f8f9fc;
  --bg-hover: rgba(55, 55, 55, 0.04);
  --bg-subtle: #f6f8fa;

  /* Text */
  --text: #464C5C;
  --text-muted: #6b748c;
  --text-link: #136CB2;
  --text-on-dark: #fff;

  /* Borders */
  --border: #c7ccd9;
  --border-subtle: #e3e4e8;

  /* Semantic */
  --green: #139543;
  --green-hover: #117a38;
  --red: #c0392b;
  --red-hover: #a33025;
  --blue: #136cb2;
  --orange: #c69026;
  --violet: #6e5494;
  --yellow: #9a6700;

  /* Tag shades — bg / text */
  --tag-green-bg: #bef5cb; --tag-green-text: #1a7f37;
  --tag-red-bg: #fdd; --tag-red-text: #b33225;
  --tag-blue-bg: #ddf4ff; --tag-blue-text: #0969da;
  --tag-orange-bg: #fff1e5; --tag-orange-text: #bc4c00;
  --tag-yellow-bg: #fff8c5; --tag-yellow-text: #9a6700;
  --tag-grey-bg: #eceef4; --tag-grey-text: #6b748c;
  --tag-violet-bg: #eddeff; --tag-violet-text: #8250df;
  --tag-indigo-bg: #e8def8; --tag-indigo-text: #6b479c;

  /* Navbar */
  --nav-bg: #292e36;

  /* Typography */
  --font-sans: 'Lato', 'Segoe UI', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  --font-mono: ui-monospace, 'Cascadia Code', 'SF Mono', Menlo, Consolas, monospace;
  --font-size: 13px;

  /* Diff */
  --diff-add-bg: rgba(151, 234, 151, 0.3);
  --diff-del-bg: rgba(251, 175, 175, 0.3);
  --diff-add-num-bg: rgba(151, 234, 151, 0.2);
  --diff-del-num-bg: rgba(251, 175, 175, 0.2);
}

/* ===== Dark Mode ===== */
body.dark {
  --bg-page: #1B2028;
  --bg-card: #242c38;
  --bg-card-header: #1c2430;
  --bg-hover: rgba(255, 255, 255, 0.05);
  --bg-subtle: #1c2430;

  --text: rgba(255, 255, 255, 0.9);
  --text-muted: rgba(255, 255, 255, 0.55);
  --text-link: #58a6ff;

  --border: rgba(255, 255, 255, 0.12);
  --border-subtle: rgba(255, 255, 255, 0.06);

  --tag-green-bg: rgba(35, 187, 91, 0.2); --tag-green-text: #4ade80;
  --tag-red-bg: rgba(210, 84, 84, 0.2); --tag-red-text: #f87171;
  --tag-blue-bg: rgba(52, 152, 219, 0.2); --tag-blue-text: #60a5fa;
  --tag-orange-bg: rgba(230, 126, 34, 0.2); --tag-orange-text: #fb923c;
  --tag-yellow-bg: rgba(241, 196, 15, 0.2); --tag-yellow-text: #fbbf24;
  --tag-grey-bg: rgba(255, 255, 255, 0.08); --tag-grey-text: rgba(255, 255, 255, 0.7);
  --tag-violet-bg: rgba(142, 68, 173, 0.2); --tag-violet-text: #c084fc;
  --tag-indigo-bg: rgba(107, 71, 156, 0.2); --tag-indigo-text: #a78bfa;

  --diff-add-bg: rgba(46, 160, 67, 0.2);
  --diff-del-bg: rgba(248, 81, 73, 0.2);
  --diff-add-num-bg: rgba(46, 160, 67, 0.1);
  --diff-del-num-bg: rgba(248, 81, 73, 0.1);
}

/* ===== Global Reset ===== */
*, *::before, *::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  background: var(--bg-page);
  color: var(--text);
  font: var(--font-size) var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  color: var(--text-link);
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}

/* FA icon utility — Phabricator's FA CSS uses .phui-font-fa, we use .fa */
.fa {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.mrs { margin-right: 6px; }

/* ===== Remarkup (rendered markdown) ===== */
.remarkup-content h1,
.remarkup-content h2,
.remarkup-content h3,
.remarkup-content h4,
.remarkup-content h5,
.remarkup-content h6 {
  margin: 16px 0 8px;
  font-weight: 600;
  color: var(--text);
  line-height: 1.3;
}
.remarkup-content h1 { font-size: 20px; }
.remarkup-content h2 { font-size: 17px; }
.remarkup-content h3 { font-size: 15px; }
.remarkup-content h4,
.remarkup-content h5,
.remarkup-content h6 { font-size: 13px; }

.remarkup-content p {
  margin: 8px 0;
}

.remarkup-content ul,
.remarkup-content ol {
  margin: 8px 0;
  padding-left: 24px;
}
.remarkup-content li {
  margin: 2px 0;
}

.remarkup-content code {
  font-family: var(--font-mono);
  font-size: 12px;
  padding: 2px 5px;
  background: var(--bg-subtle);
  border: 1px solid var(--border-subtle);
  border-radius: 3px;
}

.remarkup-content pre {
  margin: 8px 0;
  padding: 10px 12px;
  background: var(--bg-subtle);
  border: 1px solid var(--border-subtle);
  border-radius: 4px;
  overflow-x: auto;
  font-family: var(--font-mono);
  font-size: 12px;
  line-height: 1.5;
}
.remarkup-content pre code {
  padding: 0;
  background: none;
  border: none;
  border-radius: 0;
}

.remarkup-content blockquote {
  margin: 8px 0;
  padding: 4px 12px;
  border-left: 3px solid var(--border);
  color: var(--text-muted);
}

.remarkup-content table {
  border-collapse: collapse;
  margin: 8px 0;
  font-size: 13px;
}
.remarkup-content th,
.remarkup-content td {
  border: 1px solid var(--border-subtle);
  padding: 6px 10px;
  text-align: left;
}
.remarkup-content th {
  background: var(--bg-card-header);
  font-weight: 600;
}

.remarkup-content img {
  max-width: 100%;
  border-radius: 4px;
}

.remarkup-content hr {
  border: none;
  border-top: 1px solid var(--border-subtle);
  margin: 12px 0;
}

.remarkup-content a {
  color: var(--text-link);
}

.remarkup-content input[type="checkbox"] {
  margin-right: 6px;
}

/* ===== Chroma Syntax Highlighting (github light) ===== */
.k, .kc, .kd, .kn, .kp, .kr, .kt { color: #cf222e; }
.na { color: #1f2328; }
.nc { color: #1f2328; }
.no, .nd { color: #0550ae; }
.ni { color: #6639ba; }
.nl { color: #990000; font-weight: bold; }
.nn { color: #24292e; }
.nt { color: #0550ae; }
.nb { color: #6639ba; }
.bp { color: #6a737d; }
.nv, .vc, .vg, .vi, .vm { color: #953800; }
.nf, .fm { color: #6639ba; }
.s, .sa, .sb, .sc, .dl, .sd, .s2, .se, .sh, .si, .sx, .sr, .s1 { color: #0a3069; }
.ss { color: #032f62; }
.m, .mb, .mf, .mh, .mi, .il, .mo { color: #0550ae; }
.o, .ow { color: #0550ae; }
.p { color: #1f2328; }
.c, .ch, .cm, .c1 { color: #57606a; font-style: italic; }
.cs, .cp, .cpf { color: #57606a; font-style: italic; }
.err { color: #f85149; }

/* ===== Chroma Syntax Highlighting (github dark) ===== */
body.dark .k, body.dark .kd, body.dark .kn, body.dark .kr, body.dark .kt { color: #ff7b72; }
body.dark .kc, body.dark .kp { color: #79c0ff; }
body.dark .nc { color: #f0883e; font-weight: bold; }
body.dark .no { color: #79c0ff; font-weight: bold; }
body.dark .nd { color: #d2a8ff; font-weight: bold; }
body.dark .ni { color: #ffa657; }
body.dark .ne { color: #f0883e; font-weight: bold; }
body.dark .nl { color: #79c0ff; font-weight: bold; }
body.dark .nn { color: #ff7b72; }
body.dark .nt { color: #7ee787; }
body.dark .nv, body.dark .vc, body.dark .vg, body.dark .vi, body.dark .vm { color: #79c0ff; }
body.dark .nf, body.dark .fm { color: #d2a8ff; font-weight: bold; }
body.dark .nb { color: #6639ba; }
body.dark .bp { color: #8b949e; }
body.dark .s, body.dark .sb, body.dark .sc, body.dark .sd, body.dark .s2, body.dark .si, body.dark .sx, body.dark .s1 { color: #a5d6ff; }
body.dark .sa, body.dark .dl, body.dark .se, body.dark .sh, body.dark .sr { color: #79c0ff; }
body.dark .ss { color: #a5d6ff; }
body.dark .m, body.dark .mb, body.dark .mf, body.dark .mh, body.dark .mi, body.dark .il, body.dark .mo { color: #a5d6ff; }
body.dark .o, body.dark .ow { color: #ff7b72; font-weight: bold; }
body.dark .p { color: inherit; }
body.dark .c, body.dark .ch, body.dark .cm, body.dark .c1 { color: #8b949e; font-style: italic; }
body.dark .cs, body.dark .cp, body.dark .cpf { color: #8b949e; font-style: italic; }
body.dark .err { color: #f85149; }

/* ===== Flash highlight for navigating to lines ===== */
@keyframes flash-fade {
  0% { background: rgba(255, 212, 59, 0.45); }
  100% { background: transparent; }
}
.flash-highlight > td {
  animation: flash-fade 2s ease-out;
}
